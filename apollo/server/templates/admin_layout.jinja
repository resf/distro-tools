{% extends "layout.jinja" %}

{% block head %}
<style>
  bx-side-nav {
    margin-top: 3rem;
    height: calc(100% - 3rem);
  }

  .bx--container {
    will-change: margin-left;
    transition: margin-left .11s cubic-bezier(0.2, 0, 1, 0.9)
  }

  @media(min-width: 66rem) {
    .bx--container {
      margin-left: 16rem
    }

    bx-inline-notification {
      padding-left: 16rem;
    }

    #apollo-notification-wrapper {
      margin: 0;
    }

    .top-notification {
      width: 100%;
      max-width: 100% !important;
    }
  }

  .bx--with-rail .bx--container {
    margin-left: 3rem
  }

  @media(min-width: 66rem) {
    .bx--rail-expanded .bx--container {
      margin-left: 16rem
    }
  }

  @media(min-width: 66rem) {
    .bx--with-side-nav-for-header .bx--container {
      margin-left: 0
    }
  }

  .bx--main {
    height: 100%;
  }

  /* Debug: Add visual indicator for active nav items */
  bx-side-nav-link[active] {
    background-color: #0f62fe !important;
    color: white !important;
  }
  
  /* Ensure non-active items don't have active styling */
  bx-side-nav-link:not([active]) {
    background-color: transparent !important;
  }
</style>
{% endblock %}

{% block content %}
<!-- Debug: Current URL path: {{ request.url.path }} -->
<bx-side-nav aria-label="Side navigation" expanded>
  <bx-side-nav-items>
    {% set current_path = request.url.path %}
    <bx-side-nav-link href="/admin/" {% if current_path in ['/admin/', '/admin'] and not (current_path.startswith('/admin/workflows') or current_path.startswith('/admin/users') or current_path.startswith('/admin/api-keys') or current_path.startswith('/admin/oidc') or current_path.startswith('/admin/supported-products')) %}active{% endif %}>General</bx-side-nav-link>
    <bx-side-nav-link href="/admin/workflows/" {% if current_path.startswith('/admin/workflows') %}active{% endif %}>Workflows</bx-side-nav-link>
    <bx-side-nav-link href="/admin/users/" {% if current_path.startswith('/admin/users') %}active{% endif %}>Users</bx-side-nav-link>
    <bx-side-nav-link href="/admin/api-keys/" {% if current_path.startswith('/admin/api-keys') %}active{% endif %}>API Keys</bx-side-nav-link>
    <bx-side-nav-link href="/admin/supported-products/" {% if current_path.startswith('/admin/supported-products') %}active{% endif %}>Supported Products</bx-side-nav-link>
    <bx-side-nav-link href="/admin/oidc/" {% if current_path.startswith('/admin/oidc') %}active{% endif %}>OIDC</bx-side-nav-link>
  </bx-side-nav-items>
</bx-side-nav>

{% block admin_content %}{% endblock %}
{% endblock %}