{% extends "admin_layout.jinja" %}

{% block admin_content %}
<div class="bx--grid">
    <div class="bx--row">
        <div class="bx--col">
            <h1 class="bx--type-expressive-heading-05">Update User</h1>

<form id="edit_user_form" action="" method="POST">
  <bx-form-item>
    <bx-input required name="name" value="{{ user.name }}" form_id="edit_user_form">
      <span slot="label-text">Name</span>
    </bx-input>
    <bx-input required name="email" type="email" value="{{ user.email }}" form_id="edit_user_form">
      <span slot="label-text">Email</span>
    </bx-input>
    <label for="role" class="bx--label">Role</label>
    <select name="role" id="role" form="edit_user_form" class="bx--select-input" required>
      <option value="admin"{% if user.role == "admin" %} selected{% endif %}>Admin</option>
      <option value="elevated"{% if user.role == "elevated" %} selected{% endif %}>Elevated</option>
    </select>
    <bx-btn type="submit" form_id="edit_user_form">
      Update user
    </bx-btn>
  </bx-form-item>
</form>

<h2 class="bx--type-productive-heading-03" style="margin-top:2rem;">Change Password</h2>
<form id="change_password_form" action="/admin/users/{{ user.id }}/password" method="POST">
  <bx-form-item>
    <bx-input required name="new_password" type="password" form_id="change_password_form">
      <span slot="label-text">New password</span>
    </bx-input>
    <bx-input required name="confirm_password" type="password" form_id="change_password_form">
      <span slot="label-text">Confirm new password</span>
    </bx-input>
    <bx-btn type="submit" form_id="change_password_form">
      Change password
    </bx-btn>
  </bx-form-item>
</form>

<h2 class="bx--type-productive-heading-03" style="margin-top:2rem;">Danger Zone</h2>

<bx-modal id="delete-user-modal">
  <bx-modal-header>
    <bx-modal-close-button></bx-modal-close-button>
    <bx-modal-heading>Delete user</bx-modal-heading>
  </bx-modal-header>
  <bx-modal-body>
    <p>Are you sure you want to delete {{ user.name }}?</p>
  </bx-modal-body>
  <bx-modal-footer>
    <bx-modal-footer-button kind="secondary" data-modal-close>Cancel</bx-modal-footer-button>
    <bx-modal-footer-button kind="danger">Delete</bx-modal-footer-button>
  </bx-modal-footer>
</bx-modal>

<form id="delete_user_form" action="/admin/users/{{ user.id }}/delete" method="POST">
</form>
<bx-btn kind="danger" open_modal="delete-user-modal">
  Delete user
</bx-btn>
        </div>
    </div>
</div>
{% endblock %}